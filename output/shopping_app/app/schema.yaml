ANALYTICS_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies:
  - analytics_queue
  - order_db
  - billing_db
- schema:
  - fields:
    - _: shopping_app.Analytics struct{UserID string, Categories []string}
    - Analytics: shopping_app.Analytics struct{UserID string, Categories []string}
  - unfolded_fields:
    - _.userID: string
    - Analytics: shopping_app.Analytics struct{UserID string, Categories []string}
    - Analytics.UserID: string
    - Analytics.Categories: '[]string'
  - foreign_fields:
    - Analytics:
      - ANALYTICS_QUEUE.AnalyticsMessage.ProductCategory * {FOREIGN KEY, MANDATORY}
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
    - Analytics.UserID:
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
    - Analytics.Categories:
      - ANALYTICS_QUEUE.AnalyticsMessage.ProductCategory * {FOREIGN KEY, MANDATORY}

ANALYTICS_QUEUE:
- type: Queue
- kind: RabbitMQ
- dependencies:
  - order_db
  - billing_db
- schema:
  - fields:
    - _: shopping_app.AnalyticsMessage struct{UserID string, ProductCategory string}
    - AnalyticsMessage: shopping_app.AnalyticsMessage struct{UserID string, ProductCategory string}
  - unfolded_fields:
    - AnalyticsMessage: shopping_app.AnalyticsMessage struct{UserID string, ProductCategory string}
    - AnalyticsMessage.UserID: string
    - AnalyticsMessage.ProductCategory: string
  - foreign_fields:
    - AnalyticsMessage:
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
    - AnalyticsMessage.UserID:
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}

BILLING_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies:
  - order_db
  - stock_db
- schema:
  - fields:
    - _: shopping_app.Bill struct{UserID string, ProductID string, Quantity int, PricePerUnit int, TotalCost (&int)}
    - Bill: shopping_app.Bill struct{UserID string, ProductID string, Quantity int, PricePerUnit int, TotalCost (&int)}
  - unfolded_fields:
    - Bill: shopping_app.Bill struct{UserID string, ProductID string, Quantity int, PricePerUnit int, TotalCost (&int)}
    - Bill.UserID: string
    - Bill.ProductID: string
    - Bill.Quantity: int
    - Bill.PricePerUnit: int
    - Bill.TotalCost: (&int)
  - foreign_fields:
    - Bill:
      - ORDER_DB.Order.ProductID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.Quantity * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
      - STOCK_DB.Stock.ProductID * {FOREIGN KEY, MANDATORY}
      - STOCK_DB.Stock.Quantity * {FOREIGN KEY, MANDATORY}
    - Bill.UserID:
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
    - Bill.ProductID:
      - ORDER_DB.Order.ProductID * {FOREIGN KEY, MANDATORY}
      - STOCK_DB.Stock.ProductID * {FOREIGN KEY, MANDATORY}
    - Bill.Quantity:
      - ORDER_DB.Order.Quantity * {FOREIGN KEY, MANDATORY}
      - STOCK_DB.Stock.Quantity * {FOREIGN KEY, MANDATORY}
    - Bill.TotalCost:
      - ORDER_DB.Order.Quantity * {FOREIGN KEY, MANDATORY}
      - STOCK_DB.Stock.Quantity * {FOREIGN KEY, MANDATORY}

CART_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies: []
- schema:
  - fields:
    - _: shopping_app.Cart struct{CartID string, UserID string, ProductID string, Quantity int, PricePerUnit int, Status string}
    - Cart: shopping_app.Cart struct{CartID string, UserID string, ProductID string, Quantity int, PricePerUnit int, Status string}
  - unfolded_fields:
    - _.cartID: string
    - Cart: shopping_app.Cart struct{CartID string, UserID string, ProductID string, Quantity int, PricePerUnit int, Status string}
    - Cart.CartID: string
    - Cart.UserID: string
    - Cart.ProductID: string
    - Cart.Quantity: int
    - Cart.PricePerUnit: int
    - Cart.Status: string
  - foreign_fields: []

ORDER_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies: []
- schema:
  - fields:
    - _: shopping_app.Order struct{OrderID string, UserID string, ProductID string, Quantity int, Timestamp 1 int}
    - Order: shopping_app.Order struct{OrderID string, UserID string, ProductID string, Quantity int, Timestamp 1 int}
  - unfolded_fields:
    - _.orderID: string
    - Order: shopping_app.Order struct{OrderID string, UserID string, ProductID string, Quantity int, Timestamp 1 int}
    - Order.OrderID: string
    - Order.UserID: string
    - Order.ProductID: string
    - Order.Quantity: int
    - Order.Timestamp: 1 int
  - foreign_fields: []

PRODUCT_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies: []
- schema:
  - fields:
    - _: <unknown type>
  - unfolded_fields:
    - _.productID: string
  - foreign_fields: []

SHIPMENT_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies:
  - order_db
  - shipment_queue
  - billing_db
  - analytics_queue
- schema:
  - fields:
    - _: shopping_app.Shipment struct{OrderID string, UserID string, Status "pending" string}
    - Shipment: shopping_app.Shipment struct{OrderID string, UserID string, Status "pending" string}
  - unfolded_fields:
    - Shipment: shopping_app.Shipment struct{OrderID string, UserID string, Status "pending" string}
    - Shipment.OrderID: string
    - Shipment.UserID: string
    - Shipment.Status: '"pending" string'
  - foreign_fields:
    - Shipment:
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.OrderID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB._.orderID
      - SHIPMENT_QUEUE.ShipmentMessage.OrderID * {FOREIGN KEY, MANDATORY}
      - SHIPMENT_QUEUE.ShipmentMessage.UserID * {FOREIGN KEY, MANDATORY}
    - Shipment.OrderID:
      - ORDER_DB.Order.OrderID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB._.orderID
      - SHIPMENT_QUEUE.ShipmentMessage.OrderID * {FOREIGN KEY, MANDATORY}
    - Shipment.UserID:
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
      - SHIPMENT_QUEUE.ShipmentMessage.UserID * {FOREIGN KEY, MANDATORY}

SHIPMENT_QUEUE:
- type: Queue
- kind: RabbitMQ
- dependencies:
  - order_db
  - billing_db
  - analytics_queue
  - analytics_db
- schema:
  - fields:
    - _: shopping_app.ShipmentMessage struct{OrderID string, UserID string}
    - ShipmentMessage: shopping_app.ShipmentMessage struct{OrderID string, UserID string}
  - unfolded_fields:
    - ShipmentMessage: shopping_app.ShipmentMessage struct{OrderID string, UserID string}
    - ShipmentMessage.OrderID: string
    - ShipmentMessage.UserID: string
  - foreign_fields:
    - ShipmentMessage:
      - ANALYTICS_DB.Analytics.UserID * {FOREIGN KEY, MANDATORY}
      - ANALYTICS_DB._.userID * {FOREIGN KEY, MANDATORY}
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.OrderID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB._.orderID
    - ShipmentMessage.OrderID:
      - ORDER_DB.Order.OrderID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB._.orderID
    - ShipmentMessage.UserID:
      - ANALYTICS_DB.Analytics.UserID * {FOREIGN KEY, MANDATORY}
      - ANALYTICS_DB._.userID * {FOREIGN KEY, MANDATORY}
      - ANALYTICS_QUEUE.AnalyticsMessage.UserID * {FOREIGN KEY, MANDATORY}
      - BILLING_DB.Bill.UserID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.UserID * {FOREIGN KEY, MANDATORY}

STOCK_DB:
- type: NoSQLDatabase
- kind: MongoDB
- dependencies:
  - order_db
- schema:
  - fields:
    - _: shopping_app.Stock struct{ProductID string, Quantity int}
    - Stock: shopping_app.Stock struct{ProductID string, Quantity int}
  - unfolded_fields:
    - Stock: shopping_app.Stock struct{ProductID string, Quantity int}
    - Stock.ProductID: string
    - Stock.Quantity: int
  - foreign_fields:
    - Stock:
      - ORDER_DB.Order.ProductID * {FOREIGN KEY, MANDATORY}
      - ORDER_DB.Order.Quantity * {FOREIGN KEY, MANDATORY}
    - Stock.ProductID:
      - ORDER_DB.Order.ProductID * {FOREIGN KEY, MANDATORY}
    - Stock.Quantity:
      - ORDER_DB.Order.Quantity * {FOREIGN KEY, MANDATORY}
